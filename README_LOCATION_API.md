# ๐ ูุธุงู ุชุชุจุน ููุงูุน ุงูููุธููู - API ุงูุฏุงุฆู

> ูุธุงู ููุธู - ุชุชุจุน GPS ููููุธููู ูุน API ุฏุงุฆู ููุณุชูุฑ

---

## ๐ ูุนูููุงุช ุงูุฏูููู

### ุงูุฏููููุงุช ุงููุดุทุฉ:

| ุงูููุน | ุงูุฑุงุจุท | ุงูุญุงูุฉ |
|------|--------|--------|
| **ุงูุฃุณุงุณู** | `http://nuzum.site` | ๐ข ูุดุท |
| **ุงูุจุฏูู** | `https://eissahr.replit.app` | ๐ข ูุดุท |

---

## ๐ฆ ุงููููุงุช ุงููุชููุฑุฉ

### 1. **android_app_api_service.dart** ๐ฑ
ููุฏ Dart ูุงูู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูู ุชุทุจูู Flutter/Android.

**ุงููููุฒุงุช:**
- โ ุงูุฏูููู ุงูุฏุงุฆู ูุญุฏุฏ ูุณุจูุงู
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงุญุชุฑุงููุฉ
- โ ุงุฎุชุจุงุฑ ุงุชุตุงู ุชููุงุฆู
- โ Models ูุงููุฉ ููุจูุงูุงุช
- โ ุชุณุฌูู ุชูุตููู

**ุงูุงุณุชุฎุฏุงู:**
```dart
// ุงุฎุชุจุงุฑ
await ApiService.testConnection();

// ุฅุฑุณุงู
await ApiService.sendLocation(
  jobNumber: 'EMP001',
  latitude: 24.7136,
  longitude: 46.6753,
);
```

### 2. **test_location_api.html** ๐งช
ุตูุญุฉ ุงุฎุชุจุงุฑ ุชูุงุนููุฉ ูู API.

**ููููุฉ ุงูุงุณุชุฎุฏุงู:**
1. ุงูุชุญ ุงูููู ูู ุงููุชุตูุญ
2. ุฃุฏุฎู ุงูุฑูู ุงููุธููู ูุงูุฅุญุฏุงุซูุงุช
3. ุงุถุบุท "ุฅุฑุณุงู ุงููููุน"

**ุฃู ุงุณุชุฎุฏู ูููุนู ุงูุญุงูู:**
- ุงุถุบุท "ุงุณุชุฎุฏุงู ูููุนู ุงูุญุงูู"
- ุงููุญ ุงููุชุตูุญ ุตูุงุญูุฉ ุงููููุน

### 3. **API_SETUP_GUIDE.md** ๐
ุฏููู ุดุงูู ูุดุฑุญ:
- ููููุฉ ุฅุนุฏุงุฏ ุงูุชุทุจูู
- ุฃูุซูุฉ ูุงููุฉ ุจู Kotlin/Dart
- ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ
- ูุตุงุฆุญ ุงูุฃูุงู ูุงูุฃุฏุงุก

### 4. **API_QUICK_START.md** ๐
ุฏููู ุณุฑูุน ููุจุฏุก ูู 5 ุฏูุงุฆู.

### 5. **LOCATION_API_DOCS.md** ๐
ุชูุซูู API ูุงูู ูุน ุฃูุซูุฉ ุชูููุฉ.

---

## ๐ ุฑูุงุจุท API

### ููุทุฉ ุฅุฑุณุงู ุงูููุงูุน:
```
POST http://nuzum.site/api/external/employee-location
```

### ููุทุฉ ุงูุงุฎุชุจุงุฑ:
```
GET http://nuzum.site/api/external/test
```

**ุงุณุชุฌุงุจุฉ ุงูุงุฎุชุจุงุฑ:**
```json
{
  "success": true,
  "message": "External API is working!",
  "endpoints": {
    "employee_location": "/api/external/employee-location [POST]"
  }
}
```

---

## ๐ ุงููุตุงุฏูุฉ

### ููุชุงุญ API:
```
test_location_key_2025
```

**ููุงุญุธุฉ:** ุบููุฑ ุงูููุชุงุญ ูู ุงูุฅูุชุงุฌ ูู ุฎูุงู:
- Replit Secrets โ `LOCATION_API_KEY`

---

## ๐ค ูุซุงู ุทูุจ ูุงูู

### cURL:
```bash
curl -X POST http://nuzum.site/api/external/employee-location \
  -H "Content-Type: application/json" \
  -d '{
    "api_key": "test_location_key_2025",
    "job_number": "EMP001",
    "latitude": 24.7136,
    "longitude": 46.6753,
    "accuracy": 10.5,
    "recorded_at": "2025-11-08T16:30:00Z"
  }'
```

### ุงุณุชุฌุงุจุฉ ูุงุฌุญุฉ:
```json
{
  "success": true,
  "message": "ุชู ุญูุธ ุงููููุน ุจูุฌุงุญ",
  "data": {
    "employee_name": "ูุญูุฏ ุฃุญูุฏ",
    "location_id": 123,
    "recorded_at": "2025-11-08T16:30:00",
    "received_at": "2025-11-08T16:30:02"
  }
}
```

---

## ๐ ููุญุฉ ุงูุชุญูู

### ุชุชุจุน ุญู:
```
http://nuzum.site/employees/tracking-dashboard
```

### ุชุงุฑูุฎ ููุธู:
```
http://nuzum.site/employees/<id>/track-history
```

### ุฅุฏุงุฑุฉ ุงูุฏูุงุฆุฑ ุงูุฌุบุฑุงููุฉ:
```
http://nuzum.site/geofences
```

---

## ๐ฏ ุฎุทูุงุช ุงูุชุดุบูู ุงูุณุฑูุน

### ูููุทูุฑ (Flutter/Android):

1. **ุงูุณุฎ ุงูููู:**
   ```
   android_app_api_service.dart โ lib/services/
   ```

2. **ุงุณุชุฎุฏู ุงูุฎุฏูุฉ:**
   ```dart
   import 'services/android_app_api_service.dart';
   
   // ูู widget ุฃู controller
   final response = await ApiService.sendLocation(
     jobNumber: userJobNumber,
     latitude: position.latitude,
     longitude: position.longitude,
   );
   ```

3. **ุฌุงูุฒ!** โ
   - ุงูุฏูููู ูุญุฏุฏ ูุณุจูุงู
   - ุงูููุชุงุญ ุฌุงูุฒ
   - ูุง ุญุงุฌุฉ ูุชุนุฏููุงุช

### ููุงุฎุชุจุงุฑ (ุฃู ุดุฎุต):

1. **ุงูุชุญ ุตูุญุฉ ุงูุงุฎุชุจุงุฑ:**
   ```
   test_location_api.html
   ```

2. **ุฃุฏุฎู ุงูุจูุงูุงุช:**
   - ุงูุฑูู ุงููุธููู
   - ุงูุฅุญุฏุงุซูุงุช (ุฃู ุงุณุชุฎุฏู ูููุนู)

3. **ุงุถุบุท "ุฅุฑุณุงู"**

4. **ุดุงูุฏ ุงููุชูุฌุฉ:**
   - ูุฌุญ โ โ ุงูุจูุงูุงุช ูุญููุธุฉ
   - ูุดู โ โ ุฑุงุฌุน ุฑุณุงูุฉ ุงูุฎุทุฃ

---

## ๐ง ุญู ุงููุดุงูู

### โ ุฎุทุฃ 401 (ููุชุงุญ ุฎุงุทุฆ)
**ุงูุณุจุจ:** ููุชุงุญ API ุบูุฑ ุตุญูุญ  
**ุงูุญู:** ุงุณุชุฎุฏู `test_location_key_2025`

### โ ุฎุทุฃ 404 (ููุธู ุบูุฑ ููุฌูุฏ)
**ุงูุณุจุจ:** ุงูุฑูู ุงููุธููู ุบูุฑ ูุณุฌู  
**ุงูุญู:** 
1. ุณุฌูู ุงูุฏุฎูู ูููุธุงู
2. ุชุฃูุฏ ูู ูุฌูุฏ ุงูููุธู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุชุญูู ูู ุชุทุงุจู `job_number` ูุน `employee_id`

### โ ูุดู ุงูุงุชุตุงู
**ุงูุณุจุจ:** ูุดููุฉ ุดุจูุฉ ุฃู ุฏูููู  
**ุงูุญู:**
1. ุฌุฑูุจ ุงูุฏูููู ุงูุจุฏูู: `https://eissahr.replit.app`
2. ุชุญูู ูู ุงูุฅูุชุฑูุช
3. ุงูุชุญ ุฑุงุจุท ุงูุงุฎุชุจุงุฑ ูู ุงููุชุตูุญ

---

## ๐ ุงูุฃูุงู

### ุงูุฅูุชุงุฌ:
1. โ ุบููุฑ `LOCATION_API_KEY` ูู Secrets
2. โ ุงุณุชุฎุฏู HTTPS (ุงูุฏูููู ุงูุจุฏูู)
3. โ ูุนูู Rate Limiting
4. โ ุฑุงุฌุน ุงูุณุฌูุงุช ุฏูุฑูุงู

### ุงูุชุทููุฑ:
- โ ูุง ุชุญูุธ ุงูููุชุงุญ ูู Git
- โ ุงุณุชุฎุฏู BuildConfig ูู Android
- โ ุงุฎุชุจุฑ ุนูู ุฏูููู ุงูุชุทููุฑ ุฃููุงู

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

### ูุซุงุฆู ุฅุถุงููุฉ:
- ๐ `LOCATION_API_DOCS.md` - ุชูุซูู ุชููู ูุงูู
- ๐ง `API_SETUP_GUIDE.md` - ุฏููู ุงูุฅุนุฏุงุฏ ุงูููุตู
- ๐ `API_QUICK_START.md` - ุงูุจุฏุก ุงูุณุฑูุน

### ุงุฎุชุจุงุฑ ูุจุงุดุฑ:
- ๐ http://nuzum.site/api/external/test
- ๐งช `test_location_api.html`

---

## โจ ุงููููุฒุงุช

| ุงูููุฒุฉ | ุงููุตู |
|--------|-------|
| ๐ **ุฏูููู ุฏุงุฆู** | ูู ูููุทุน ุงูุงุชุตุงู |
| ๐งช **ุงุฎุชุจุงุฑ ุชููุงุฆู** | ุชุญูู ูู ุงูุงุชุตุงู ูุจู ุงูุฅุฑุณุงู |
| ๐ **ููุญุฉ ุชุญูู** | ุนุฑุถ ูุจุงุดุฑ ููููุงูุน |
| ๐บ๏ธ **ุฎุฑุงุฆุท ุชูุงุนููุฉ** | Google Maps ูุน ุชุชุจุน ุญู |
| ๐ **ุฅุดุนุงุฑุงุช Geofence** | ุชูุจูู ุนูุฏ ุฏุฎูู/ุฎุฑูุฌ ูู ููุงุทู |
| ๐ **ุชูุงุฑูุฑ ุดุงููุฉ** | PDF & Excel ุงุญุชุฑุงููุฉ |
| ๐ **ุขูู ููุดูุฑ** | ูุตุงุฏูุฉ API Key |
| โก **ุณุฑูุน ูููุซูู** | ูุนุงูุฌุฉ ููุฑูุฉ ููููุงูุน |

---

## ๐ ุงูุงุณุชุฎุฏุงู ุงููุชูุฏู

### ุชุชุจุน ุชููุงุฆู ูู ุงูุฎูููุฉ:
```dart
// ุฅุนุฏุงุฏ WorkManager ููุฅุฑุณุงู ุงูุชููุงุฆู
class LocationWorker {
  void schedulePeriodicTracking() {
    Workmanager().registerPeriodicTask(
      "location_tracking",
      "sendLocation",
      frequency: Duration(minutes: 15),
    );
  }
}
```

### ุญูุธ ูุญูู ูุฅุนุงุฏุฉ ูุญุงููุฉ:
```dart
// ุญูุธ ุงูููุงูุน ุงููุงุดูุฉ ูุญููุงู
if (!response.success) {
  await saveToLocal(jobNumber, lat, lng);
  // ุฅุนุงุฏุฉ ุงููุญุงููุฉ ูุงุญูุงู
}
```

---

## ๐ฏ ููุฎุต ุณุฑูุน

โ **ุฌุงูุฒ ููุงุณุชุฎุฏุงู ููุฑุงู**  
โ **ุฏููููุงุช ุฏุงุฆูุฉ ููุณุชูุฑุฉ**  
โ **ููุฏ ูุงูู ูุน ุฃูุซูุฉ**  
โ **ุตูุญุฉ ุงุฎุชุจุงุฑ ุชูุงุนููุฉ**  
โ **ุชูุซูู ุดุงูู**  
โ **ุฏุนู ูุงูู ููุนุฑุจูุฉ**

---

**ูุธุงู ููุธู** - ุฅุฏุงุฑุฉ ุดุงููุฉ ููููุธููู ูุงูุฃุณุทูู ๐ธ๐ฆ

*ุชู ุงูุชุญุฏูุซ: ููููุจุฑ 2025*
