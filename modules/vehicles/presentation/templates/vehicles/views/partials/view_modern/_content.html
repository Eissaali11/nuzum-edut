<div class="container">
    <div class="container-main">
        <!-- Header -->
        <div class="vehicle-header">
            <h1>๐ {{ vehicle.plate_number }}</h1>
            <p>{{ vehicle.make }} {{ vehicle.model }} - {{ vehicle.year }}</p>
        </div>
        
        <div class="main-content">
            <!-- Sidebar Navigation -->
            <div class="sidebar-nav">
                <div class="nav-header">
                    <i class="fas fa-list-alt"></i>
                    ุฃูุณุงู ุงูุณูุงุฑุฉ
                </div>
                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="#overview" class="nav-link active" onclick="showTab(event, 'overview')">
                            <i class="fas fa-tachometer-alt"></i>
                            ูุธุฑุฉ ุนุงูุฉ
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#basic-info" class="nav-link" onclick="showTab(event, 'basic-info')">
                            <i class="fas fa-info-circle"></i>
                            ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#handover" class="nav-link" onclick="showTab(event, 'handover')">
                            <i class="fas fa-exchange-alt"></i>
                            ุงูุชุณููู ูุงูุงุณุชูุงู ({{ handovers|length }})
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#workshop" class="nav-link" onclick="showTab(event, 'workshop')">
                            <i class="fas fa-tools"></i>
                            ุณุฌูุงุช ุงููุฑุดุฉ ({{ workshop_records|length }})
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#documents" class="nav-link" onclick="showTab(event, 'documents')">
                            <i class="fas fa-file-alt"></i>
                            ุงููุซุงุฆู ({{ attachments|length }})
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#license" class="nav-link" onclick="showTab(event, 'license')">
                            <i class="fas fa-id-card"></i>
                            ุตูุฑุฉ ุงูุฑุฎุตุฉ
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#drive" class="nav-link" onclick="showTab(event, 'drive')">
                            <i class="fab fa-google-drive"></i>
                            ูููุงุช Google Drive
                        </a>
                    </li>
                </ul>
            </div>
            
            <!-- Content Area -->
            <div class="content-area">
                <!-- Overview Tab -->
                <div id="overview" class="tab-pane active">
                    <h2 class="section-title">ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุณูุงุฑุฉ</h2>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon text-primary">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="stat-number">
                                {% if current_employee %}
                                    {{ current_employee.name[:10] }}
                                {% else %}
                                    ุบูุฑ ูุญุฏุฏ
                                {% endif %}
                            </div>
                            <div class="stat-label">ุงูุณุงุฆู ุงูุญุงูู</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon text-success">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-number">{{ vehicle.status }}</div>
                            <div class="stat-label">ุญุงูุฉ ุงูุณูุงุฑุฉ</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon text-warning">
                                <i class="fas fa-wrench"></i>
                            </div>
                            <div class="stat-number">{{ workshop_records|length }}</div>
                            <div class="stat-label">ุณุฌูุงุช ุงูุตูุงูุฉ</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon text-info">
                                <i class="fas fa-file-alt"></i>
                            </div>
                            <div class="stat-number">{{ attachments|length }}</div>
                            <div class="stat-label">ุงููุซุงุฆู</div>
                        </div>
                    </div>
                    
                    <div class="info-box">
                        <h5><i class="fas fa-bolt"></i> ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ</h5>
                        <div class="d-flex gap-3 flex-wrap">
                            <a href="{{ url_for('vehicles.vehicle_license_image', vehicle_id=vehicle.id) }}" class="btn-modern btn-primary">
                                <i class="fas fa-id-card"></i> ุฅุฏุงุฑุฉ ุตูุฑุฉ ุงูุฑุฎุตุฉ
                            </a>
                            <a href="{{ url_for('vehicles.vehicle_drive_files', vehicle_id=vehicle.id) }}" class="btn-modern btn-success">
                                <i class="fab fa-google-drive"></i> ุฅุฏุงุฑุฉ ูููุงุช Drive
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Basic Info Tab -->
                <div id="basic-info" class="tab-pane">
                    <h2 class="section-title">ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ</h2>
                    
                    <div class="info-box">
                        <h5><i class="fas fa-car"></i> ุจูุงูุงุช ุงูุณูุงุฑุฉ</h5>
                        <div class="info-row">
                            <div class="info-item">
                                <div class="info-label">ุฑูู ุงูููุญุฉ</div>
                                <div class="info-value">{{ vehicle.plate_number }}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">ุงููุงุฑูุฉ</div>
                                <div class="info-value">{{ vehicle.make }}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">ุงูููุฏูู</div>
                                <div class="info-value">{{ vehicle.model }}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">ุณูุฉ ุงูุตูุน</div>
                                <div class="info-value">{{ vehicle.year }}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">ุงูููู</div>
                                <div class="info-value">{{ vehicle.color }}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">ุงูุญุงูุฉ</div>
                                <div class="info-value">
                                    <span class="badge badge-success">{{ vehicle.status }}</span>
                                </div>
                            </div>
                            {% if vehicle.mileage %}
                            <div class="info-item">
                                <div class="info-label">ุนุฏุงุฏ ุงููุณุงูุฉ</div>
                                <div class="info-value">{{ "{:,}".format(vehicle.mileage) }} ูู</div>
                            </div>
                            {% endif %}
                        </div>
                        {% if vehicle.notes %}
                        <div class="info-item">
                            <div class="info-label">ููุงุญุธุงุช</div>
                            <div class="info-value">{{ vehicle.notes }}</div>
                        </div>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Handover Tab -->
                <div id="handover" class="tab-pane">
                    <h2 class="section-title">ุณุฌู ุงูุชุณููู ูุงูุงุณุชูุงู</h2>
                    
                    {% if handovers %}
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ุงูููุน</th>
                                <th>ุงุณู ุงูุดุฎุต</th>
                                <th>ุฑูู ุงููุงุชู</th>
                                <th>ุนุฏุงุฏ ุงููุณุงูุฉ</th>
                                <th>ุงูุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for handover in handovers %}
                            <tr>
                                <td>{{ handover.formatted_date }}</td>
                                <td>
                                    {% if handover.handover_type == 'delivery' %}
                                    <span class="badge badge-success">ุชุณููู</span>
                                    {% else %}
                                    <span class="badge badge-primary">ุงุณุชูุงู</span>
                                    {% endif %}
                                </td>
                                <td>{{ handover.person_name }}</td>
                                <td>{{ handover.person_mobile or 'ุบูุฑ ูุญุฏุฏ' }}</td>
                                <td>{{ "{:,}".format(handover.mileage) if handover.mileage else 'ุบูุฑ ูุญุฏุฏ' }}</td>
                                <td>
                                    <a href="{{ url_for('vehicles.view_handover', id=handover.id) }}" class="btn-modern btn-primary btn-sm">
                                        <i class="fas fa-eye"></i>
                                    </a>
                                    <a href="{{ url_for('vehicles.edit_handover', id=handover.id) }}" class="btn-modern btn-warning btn-sm">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    {% else %}
                    <div class="empty-state">
                        <i class="fas fa-exchange-alt"></i>
                        <h5>ูุง ุชูุฌุฏ ุณุฌูุงุช ุชุณููู ูุงุณุชูุงู</h5>
                        <p>ูู ูุชู ุชุณุฌูู ุฃู ุนูููุงุช ุชุณููู ุฃู ุงุณุชูุงู ููุฐู ุงูุณูุงุฑุฉ ุจุนุฏ</p>
                    </div>
                    {% endif %}
                </div>
                
                <!-- Workshop Tab -->
                <div id="workshop" class="tab-pane">
                    <h2 class="section-title">ุณุฌูุงุช ุงููุฑุดุฉ ูุงูุตูุงูุฉ</h2>
                    
                    {% if workshop_records %}
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ุชุงุฑูุฎ ุงูุฏุฎูู</th>
                                <th>ุงููุดููุฉ</th>
                                <th>ุงุณู ุงููุฑุดุฉ</th>
                                <th>ุงูุชูููุฉ</th>
                                <th>ุงูุญุงูุฉ</th>
                                <th>ุงูุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for record in workshop_records %}
                            <tr>
                                <td>{{ record.formatted_entry_date }}</td>
                                <td>{{ record.description[:50] }}{% if record.description|length > 50 %}...{% endif %}</td>
                                <td>{{ record.workshop_name or 'ุบูุฑ ูุญุฏุฏ' }}</td>
                                <td>{{ "{:,.2f}".format(record.cost) if record.cost else 'ุบูุฑ ูุญุฏุฏ' }} ุฑูุงู</td>
                                <td>
                                    {% if record.repair_status == 'completed' %}
                                    <span class="badge badge-success">ููุชูู</span>
                                    {% elif record.repair_status == 'in_progress' %}
                                    <span class="badge badge-warning">ููุฏ ุงูุชูููุฐ</span>
                                    {% else %}
                                    <span class="badge badge-primary">{{ record.repair_status }}</span>
                                    {% endif %}
                                </td>
                                <td>
                                    <a href="{{ url_for('vehicles.workshop_details', workshop_id=record.id) }}" class="btn-modern btn-primary btn-sm">
                                        <i class="fas fa-eye"></i>
                                    </a>
                                    <a href="{{ url_for('vehicles.edit_workshop', id=record.id) }}" class="btn-modern btn-warning btn-sm">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    {% else %}
                    <div class="empty-state">
                        <i class="fas fa-tools"></i>
                        <h5>ูุง ุชูุฌุฏ ุณุฌูุงุช ุตูุงูุฉ</h5>
                        <p>ูู ูุชู ุชุณุฌูู ุฃู ุนูููุงุช ุตูุงูุฉ ููุฐู ุงูุณูุงุฑุฉ ุจุนุฏ</p>
                    </div>
                    {% endif %}
                </div>
                
                <!-- Documents Tab -->
                <div id="documents" class="tab-pane">
                    <h2 class="section-title">ุงููุซุงุฆู ูุงููุฑููุงุช</h2>
                    
                    {% if attachments %}
                    <div class="row">
                        {% for attachment in attachments %}
                        <div class="col-md-6 col-lg-4 mb-3">
                            <div class="info-box">
                                <h6>{{ attachment.title or 'ูุซููุฉ' }}</h6>
                                <p class="text-muted small">{{ attachment.description or 'ูุง ููุฌุฏ ูุตู' }}</p>
                                <a href="{{ url_for('static', filename='uploads/vehicles/' + attachment.file_path) }}" target="_blank" class="btn-modern btn-primary w-100">
                                    <i class="fas fa-download"></i> ุนุฑุถ ุงูููู
                                </a>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <div class="empty-state">
                        <i class="fas fa-file-alt"></i>
                        <h5>ูุง ุชูุฌุฏ ูุซุงุฆู</h5>
                        <p>ูู ูุชู ุฑูุน ุฃู ูุซุงุฆู ููุฐู ุงูุณูุงุฑุฉ ุจุนุฏ</p>
                    </div>
                    {% endif %}
                </div>
                
                <!-- License Tab -->
                <div id="license" class="tab-pane">
                    <h2 class="section-title">ุตูุฑุฉ ุฑุฎุตุฉ ุงูุณูุงุฑุฉ</h2>
                    
                    {% if vehicle.license_image %}
                    <div class="text-center">
                        <img src="{{ url_for('static', filename='uploads/licenses/' + vehicle.license_image) }}" class="img-fluid rounded shadow" style="max-height: 500px;" alt="ุตูุฑุฉ ุงูุฑุฎุตุฉ">
                        <div class="mt-3">
                            <a href="{{ url_for('vehicles.vehicle_license_image', vehicle_id=vehicle.id) }}" class="btn-modern btn-warning">
                                <i class="fas fa-edit"></i> ุชุญุฏูุซ ุงูุตูุฑุฉ
                            </a>
                        </div>
                    </div>
                    {% else %}
                    <div class="empty-state">
                        <i class="fas fa-id-card"></i>
                        <h5>ูุง ุชูุฌุฏ ุตูุฑุฉ ุฑุฎุตุฉ</h5>
                        <p>ูู ูุชู ุฑูุน ุตูุฑุฉ ุฑุฎุตุฉ ููุฐู ุงูุณูุงุฑุฉ ุจุนุฏ</p>
                        <a href="{{ url_for('vehicles.vehicle_license_image', vehicle_id=vehicle.id) }}" class="btn-modern btn-primary">
                            <i class="fas fa-upload"></i> ุฑูุน ุตูุฑุฉ ุงูุฑุฎุตุฉ
                        </a>
                    </div>
                    {% endif %}
                </div>
                
                <!-- Drive Tab -->
                <div id="drive" class="tab-pane">
                    <h2 class="section-title">ูููุงุช Google Drive</h2>
                    
                    {% if vehicle.drive_folder_link %}
                    <div class="info-box">
                        <h5><i class="fas fa-link"></i> ุฑุงุจุท ูุฌูุฏ Google Drive</h5>
                        <p>ุชู ุฑุจุท ูุฐู ุงูุณูุงุฑุฉ ุจูุฌูุฏ Google Drive</p>
                        <div class="d-flex gap-3">
                            <a href="{{ vehicle.drive_folder_link }}" target="_blank" class="btn-modern btn-success">
                                <i class="fab fa-google-drive"></i> ูุชุญ ุงููุฌูุฏ
                            </a>
                            <a href="{{ url_for('vehicles.vehicle_drive_files', vehicle_id=vehicle.id) }}" class="btn-modern btn-primary">
                                <i class="fas fa-edit"></i> ุฅุฏุงุฑุฉ ุงูุฑุงุจุท
                            </a>
                        </div>
                    </div>
                    {% else %}
                    <div class="empty-state">
                        <i class="fab fa-google-drive"></i>
                        <h5>ุบูุฑ ูุฑุชุจุท ุจู Google Drive</h5>
                        <p>ูู ูุชู ุฑุจุท ูุฐู ุงูุณูุงุฑุฉ ุจูุฌูุฏ Google Drive ุจุนุฏ</p>
                        <a href="{{ url_for('vehicles.vehicle_drive_files', vehicle_id=vehicle.id) }}" class="btn-modern btn-success">
                            <i class="fas fa-link"></i> ุฑุจุท ูุฌูุฏ Drive
                        </a>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    
    <!-- Back Button -->
    <div class="text-center mt-4">
        <a href="{{ url_for('vehicles.index') }}" class="btn-modern btn-primary btn-lg">
            <i class="fas fa-arrow-right"></i> ุงูุนูุฏุฉ ุฅูู ูุงุฆูุฉ ุงูุณูุงุฑุงุช
        </a>
    </div>
</div>

<script>
function showTab(event, tabId) {
    // Hide all tabs
    var tabs = document.querySelectorAll('.tab-pane');
    tabs.forEach(function(tab) {
        tab.classList.remove('active');
    });
    
    // Remove active class from all nav links
    var navLinks = document.querySelectorAll('.nav-link');
    navLinks.forEach(function(link) {
        link.classList.remove('active');
    });
    
    // Show selected tab
    document.getElementById(tabId).classList.add('active');
    
    // Add active class to clicked nav link
    event.target.classList.add('active');
    
    // Prevent default link behavior
    event.preventDefault();
}
</script>
