{# وحدات الجداول — استخدام: {% from 'macros/tables.html' import data_table %} #}

{% macro data_table(id, columns, rows, actions=None, empty_message='لا توجد بيانات') %}
<div class="table-responsive card-custom p-0 overflow-hidden">
  <table class="table table-hover table-striped align-middle mb-0" id="{{ id }}">
    <thead class="table-light">
      <tr>
        {% for col in columns %}
        <th scope="col">{{ col.label if col is mapping else col }}</th>
        {% endfor %}
        {% if actions %}
        <th scope="col" class="text-center table-col-actions">إجراء</th>
        {% endif %}
      </tr>
    </thead>
    <tbody>
      {% for row in rows %}
      <tr>
        {% for col in columns %}
        <td>{{ row[col.key] if col is mapping and col.key else row[loop.index0] }}</td>
        {% endfor %}
        {% if actions %}
        <td class="text-center">
          {% for act in actions %}
          <a href="{{ act.url(row) if act.url is callable else act.url }}" class="btn btn-sm btn-outline-{{ act.type|default('primary') }} me-1">{{ act.label }}</a>
          {% endfor %}
        </td>
        {% endif %}
      </tr>
      {% else %}
      <tr><td colspan="{{ columns|length + (1 if actions else 0) }}" class="text-center text-muted py-4">{{ empty_message }}</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endmacro %}

{% macro simple_table(headers, rows, table_class='') %}
<table class="table table-hover {{ table_class }}">
  <thead><tr>{% for h in headers %}<th>{{ h }}</th>{% endfor %}</tr></thead>
  <tbody>
    {% for row in rows %}<tr>{% for cell in row %}<td>{{ cell }}</td>{% endfor %}</tr>{% endfor %}
  </tbody>
</table>
{% endmacro %}
