{% extends 'layout.html' %}

{% block title %}التنبيهات الذكية - الذكاء الاصطناعي{% endblock %}

{% block extra_css %}
{% include 'ai_services/partials/smart_alerts/_extra_css.html' %}
{% endblock %}

{% block content %}
{% include 'ai_services/partials/smart_alerts/_content.html' %}
{% endblock %}

{% block extra_js %}
<script>
function handleAlert(actionUrl) {
    if (actionUrl && actionUrl !== '#') {
        window.location.href = actionUrl;
    } else {
        alert('سيتم إضافة إجراءات محددة لكل نوع تنبيه');
    }
}

function dismissAlert(button) {
    const alertCard = button.closest('.alert-card');
    alertCard.style.opacity = '0.5';
    alertCard.style.transform = 'translateX(100%)';
    setTimeout(() => {
        alertCard.remove();
    }, 300);
}

function snoozeAlert(button) {
    const alertCard = button.closest('.alert-card');
    alertCard.style.opacity = '0.3';
    alert('سيتم تذكيرك بهذا التنبيه خلال ساعة');
}

function checkForAlerts() {
    // محاكاة فحص التنبيهات الجديدة
    const loader = document.createElement('div');
    loader.innerHTML = '<i class="fas fa-spinner fa-spin"></i> جاري الفحص...';
    loader.className = 'text-center text-info';
    
    const button = event.target;
    const originalContent = button.innerHTML;
    button.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>جاري الفحص...';
    button.disabled = true;
    
    setTimeout(() => {
        button.innerHTML = originalContent;
        button.disabled = false;
        alert('تم فحص جميع الأنظمة - لا توجد تنبيهات جديدة');
    }, 2000);
}

function saveAlertSettings() {
    alert('تم حفظ إعدادات التنبيهات بنجاح');
}

function exportAlerts() {
    alert('سيتم إضافة وظيفة تصدير التنبيهات قريباً');
}

// تحديث التنبيهات كل 30 ثانية
setInterval(() => {
    console.log('فحص التنبيهات الجديدة...');
    // يمكن إضافة استدعاء AJAX هنا لجلب التنبيهات الجديدة
}, 30000);
</script>
{% endblock %}