<div class="image-view-container">
    <div class="container">
        <!-- رأس الصفحة -->
        <div class="page-header">
            <div class="content">
                <div class="text-center">
                    <h1 class="mb-3">
                        <i class="fas fa-image me-3"></i>
                        عرض صورة الورشة
                    </h1>
                    <p class="lead mb-0">
                        صورة {{ image_type_arabic }} للسيارة {{ vehicle.plate_number }}
                    </p>
                </div>
            </div>
        </div>

        <!-- عرض الصورة -->
        <div class="info-card">
            <div class="card-header-gradient">
                <h5>
                    <i class="fas fa-image"></i>
                    {{ image_type_arabic }}
                </h5>
            </div>
            <div class="image-display-area">
                <div class="image-type-badge {% if image.image_type == 'before' %}badge-before{% else %}badge-after{% endif %}">
                    {{ image_type_arabic }}
                </div>
                <div>
                    <img src="{{ url_for('static', filename=image.image_path) }}" 
                         alt="{{ image_type_arabic }}" 
                         class="main-image"
                         onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjhmOWZhIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzY2NzU4MyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPtmE2YUg2YrYqtmFINin2YTYudir2YjYsSDYudmE2Ykg2KfZhNi12YjYsdipPC90ZXh0Pjwvc3ZnPg==';">
                </div>
                {% if image.notes %}
                <p class="mt-3 text-muted">{{ image.notes }}</p>
                {% endif %}
            </div>
        </div>

        <!-- معلومات السيارة -->
        <div class="info-card">
            <div class="card-header-gradient">
                <h5>
                    <i class="fas fa-car"></i>
                    معلومات السيارة
                </h5>
            </div>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">رقم اللوحة</span>
                    <span class="info-value">{{ vehicle.plate_number }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">الماركة</span>
                    <span class="info-value">{{ vehicle.make }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">الموديل</span>
                    <span class="info-value">{{ vehicle.model }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">السنة</span>
                    <span class="info-value">{{ vehicle.year }}</span>
                </div>
            </div>
        </div>

        <!-- معلومات الورشة -->
        <div class="info-card">
            <div class="card-header-gradient">
                <h5>
                    <i class="fas fa-wrench"></i>
                    معلومات الورشة
                </h5>
            </div>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">اسم الورشة</span>
                    <span class="info-value">{{ workshop.workshop_name or 'غير محدد' }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">تاريخ الدخول</span>
                    <span class="info-value">{{ workshop.formatted_entry_date or 'غير محدد' }}</span>
                </div>
                {% if workshop.exit_date %}
                <div class="info-item">
                    <span class="info-label">تاريخ الخروج</span>
                    <span class="info-value">{{ workshop.formatted_exit_date }}</span>
                </div>
                {% endif %}
                <div class="info-item">
                    <span class="info-label">الفني المسؤول</span>
                    <span class="info-value">{{ workshop.technician_name or 'غير محدد' }}</span>
                </div>
            </div>
        </div>

        <!-- أزرار الإجراءات -->
        <div class="action-buttons">
            <a href="{{ url_for('vehicles.workshop_details', workshop_id=workshop.id) }}" class="action-btn btn-primary-gradient">
                <i class="fas fa-arrow-left me-2"></i>
                العودة لتفاصيل الورشة
            </a>
            <a href="{{ url_for('vehicles.view', id=vehicle.id) }}" class="action-btn btn-secondary-gradient">
                <i class="fas fa-car me-2"></i>
                عرض تفاصيل السيارة
            </a>
        </div>
    </div>
</div>
