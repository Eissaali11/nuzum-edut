<div class="container-fluid">
    <!-- Enhanced Header -->
    <div class="vehicles-header">
        <div class="d-flex justify-content-between align-items-center flex-wrap">
            <div>
                <h2><i class="fas fa-car ms-2"></i>ุฅุฏุงุฑุฉ ุงูุณูุงุฑุงุช</h2>
                <p class="text-muted mb-0">ุฅุฏุงุฑุฉ ุดุงููุฉ ูุฃุณุทูู ุงูุณูุงุฑุงุช ูุงููุณุชูุฏุงุช ูุงูุนูููุงุช</p>
            </div>
            <div class="action-btn-group">
                <a href="{{ url_for('vehicles.create') }}" class="action-btn btn-primary-enhanced">
                    <i class="fas fa-plus"></i>
                    ุฅุถุงูุฉ ุณูุงุฑุฉ ุฌุฏูุฏุฉ
                </a>
                <a href="{{ url_for('vehicles.detailed_list') }}" class="action-btn btn-success-enhanced">
                    <i class="fas fa-list-alt"></i>
                    ุงููุงุฆูุฉ ุงูุชูุตูููุฉ
                </a>
                <a href="{{ url_for('vehicles.dashboard') }}" class="action-btn btn-info-enhanced">
                    <i class="fas fa-chart-bar"></i>
                    ููุญุฉ ุงููุนูููุงุช
                </a>
                <a href="{{ url_for('vehicles.export_vehicles_excel') }}" class="action-btn btn-secondary-enhanced">
                    <i class="fas fa-file-excel"></i>
                    ุชุตุฏูุฑ Excel
                </a>
                <a href="{{ url_for('vehicles.export_vehicles_pdf_english') }}" class="action-btn btn-warning-enhanced" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                    <i class="fas fa-file-pdf"></i>
                    PDF English
                </a>
                <a href="{{ url_for('vehicles.import_vehicles') }}" class="action-btn btn-info-enhanced">
                    <i class="fas fa-file-import"></i>
                    ุงุณุชูุฑุงุฏ Excel
                </a>
                <a href="{{ url_for('vehicles.expired_documents') }}" class="action-btn btn-danger-enhanced">
                    <i class="fas fa-exclamation-triangle"></i>
                    ุงููุซุงุฆู ุงูููุชููุฉ
                </a>
            </div>
        </div>
    </div>

    
    <!-- Dashboard Stats Include -->
    {% include "vehicles/dashboard_stats.html" %}
    <!-- Enhanced Filter Card -->
    <div class="filter-card card mb-4">
        <div class="card-header">
            <h5><i class="fas fa-filter ms-2"></i>ููุงุชุฑ ุงูุจุญุซ</h5>
        </div>
        <div class="card-body">
            <form method="get" action="{{ url_for('vehicles.index') }}" class="row g-3">
                <div class="col-md-3">
                    <label for="search_plate" class="form-label">ุงูุจุญุซ ุจุฑูู ุงูุณูุงุฑุฉ</label>
                    <input type="text" name="search_plate" id="search_plate" class="form-control" 
                           placeholder="ุงุฏุฎู ุฑูู ุงูุณูุงุฑุฉ..." value="{{ search_plate }}">
                </div>
                <div class="col-md-3">
                    <label for="status" class="form-label">ููุชุฑุฉ ุญุณุจ ุงูุญุงูุฉ</label>
                    <select name="status" id="status" class="form-select">
                        <option value="">ุฌููุน ุงูุญุงูุงุช</option>
                        {% for status in statuses %}
                        <option value="{{ status }}" {% if status_filter == status %}selected{% endif %}>
                            {% if status == 'available' %}โ ูุชุงุญุฉ
                            {% elif status == 'rented' %}๐ ูุคุฌุฑุฉ
                            {% elif status == 'in_project' %}๐ ูุดุทุฉ ูุน ุณุงุฆู
                            {% elif status == 'in_workshop' %}๐ง ูู ุงููุฑุดุฉ ุตูุงูุฉ
                            {% elif status == 'accident' %}โ๏ธ ูู ุงููุฑุดุฉ ุญุงุฏุซ
                            {% elif status == 'out_of_service' %}๐ด ุฎุงุฑุฌ ุงูุฎุฏูุฉ
                            {% else %}{{ status }}{% endif %}
                        </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-3">
                    <label for="make" class="form-label">ููุชุฑุฉ ุญุณุจ ุงูุดุฑูุฉ ุงููุตูุนุฉ</label>
                    <select name="make" id="make" class="form-select">
                        <option value="">ุฌููุน ุงูุดุฑูุงุช</option>
                        {% for make in makes %}
                        <option value="{{ make }}" {% if make_filter == make %}selected{% endif %}>{{ make }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-3">
                    <label for="project" class="form-label">ููุชุฑุฉ ุญุณุจ ุงููุดุฑูุน</label>
                    <select name="project" id="project" class="form-select">
                        <option value="">ุฌููุน ุงููุดุงุฑูุน</option>
                        {% for project in projects %}
                        <option value="{{ project }}" {% if project_filter == project %}selected{% endif %}>{{ project }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-12">
                    <div class="d-flex align-items-center">
                        <button type="submit" class="btn btn-primary-enhanced action-btn">
                            <i class="fas fa-search"></i>
                            ุจุญุซ
                        </button>
                        <a href="{{ url_for('vehicles.index') }}" class="btn btn-secondary-enhanced action-btn ms-2">
                            <i class="fas fa-redo"></i>
                            ุฅุนุงุฏุฉ ุถุจุท
                        </a>
                        <a href="{{ url_for('vehicles.export_vehicles_excel') }}" class="btn btn-success-enhanced action-btn ms-2">
                            <i class="fas fa-file-excel"></i>
                            ุชุตุฏูุฑ Excel
                        </a>
                        <a href="{{ url_for('vehicles.import_vehicles') }}" class="btn btn-info-enhanced action-btn ms-2">
                            <i class="fas fa-file-import"></i>
                            ุงุณุชูุฑุงุฏ Excel
                        </a>
                    </div>
                </div>
            </form>
        </div>
    </div>


    <!-- Enhanced Vehicles Table -->
    <div class="vehicles-table-container card">
        <div class="card-header">
            <h5><i class="fas fa-list ms-2"></i>ูุงุฆูุฉ ุงูุณูุงุฑุงุช</h5>
        </div>
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover mb-0 align-middle nuzum-responsive-table">
                    <thead class="bg-light">
                        <tr>
                            <th class="py-3">#</th>
                            <th class="py-3">ุฑูู ุงูููุญุฉ</th>
                            <th class="py-3">ุงูุดุฑูุฉ</th>
                            <th class="py-3">ุงูููุฏูู</th>
                            <th class="py-3">ุงูุณูุฉ</th>
                            <th class="py-3">ุงูููู</th>
                            <th class="py-3">ุงุณู ุงูุณุงุฆู</th>
                            <th class="py-3">ุงูุญุงูุฉ</th>
                            <th class="py-3">ุงูุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% if vehicles %}
                            {% for vehicle in vehicles %}
                            <tr>
                                <td data-label="#">{{ loop.index }}</td>
                                <td data-label="ุฑูู ุงูููุญุฉ"><strong>{{ vehicle.plate_number }}</strong></td>
                                <td data-label="ุงูุดุฑูุฉ">{{ vehicle.make }}</td>
                                <td data-label="ุงูููุฏูู">{{ vehicle.model }}</td>
                                <td data-label="ุงูุณูุฉ">{{ vehicle.year }}</td>
                                <td data-label="ุงูููู">
                                    <span class="color-badge" style="background-color: {{ vehicle.color }};"></span>
                                    {{ vehicle.color }}
                                </td>
                                <td data-label="ุงูุณุงุฆู">
                                    {% if vehicle.driver_name %}
                                        {% if vehicle.current_employee_id %}
                                            <a href="{{ url_for('employees.view', id=vehicle.current_employee_id) }}" class="text-success fw-bold text-decoration-none" title="ุงููุฑ ูุนุฑุถ ุจูุงูุงุช ุงูููุธู">
                                                {{ vehicle.driver_name }}
                                            </a>
                                        {% else %}
                                            <span class="text-success fw-bold">{{ vehicle.driver_name }}</span>
                                        {% endif %}
                                    {% else %}
                                        <span class="text-muted">ุบูุฑ ูุญุฏุฏ</span>
                                    {% endif %}
                                </td>
                                <td data-label="ุงูุญุงูุฉ">
                                    {% if vehicle.status == 'available' %}
                                        <span class="status-badge bg-success">โ ูุชุงุญุฉ</span>
                                    {% elif vehicle.status == 'rented' %}
                                        <span class="status-badge bg-info">๐ ูุคุฌุฑุฉ</span>
                                    {% elif vehicle.status == 'in_project' %}
                                        <span class="status-badge bg-info">๐ ูุดุทุฉ ูุน ุณุงุฆู</span>
                                    {% elif vehicle.status == 'in_workshop' %}
                                        <span class="status-badge bg-warning text-dark">๐ง ูู ุงููุฑุดุฉ ุตูุงูุฉ</span>
                                    {% elif vehicle.status == 'accident' %}
                                        <span class="status-badge bg-danger">โ๏ธ ูู ุงููุฑุดุฉ ุญุงุฏุซ</span>
                                    {% elif vehicle.status == 'out_of_service' %}
                                        <span class="status-badge bg-secondary text-white">๐ด ุฎุงุฑุฌ ุงูุฎุฏูุฉ</span>
                                    {% else %}
                                        <span class="status-badge bg-secondary">{{ vehicle.status }}</span>
                                    {% endif %}
                                </td>
                                <td data-label="ุงูุฅุฌุฑุงุกุงุช" class="table-actions">
                                    <div class="btn-group">
                                        <a href="{{ url_for('vehicles.view_encoded', encoded_id=vehicle.id|encode_vehicle_id) }}" class="btn btn-info btn-sm" title="ุนุฑุถ ุงูุชูุงุตูู">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                        <a href="{{ url_for('vehicles.edit', id=vehicle.id) }}" class="btn btn-warning btn-sm" title="ุชุนุฏูู">
                                            <i class="fas fa-edit"></i>
                                        </a>
                                        <a href="{{ url_for('vehicles.confirm_delete', id=vehicle.id) }}" class="btn btn-danger btn-sm" title="ุญุฐู">
                                            <i class="fas fa-trash"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        {% else %}
                            <tr>
                                <td colspan="9" class="text-center py-4">
                                    <div class="alert alert-info mb-0">
                                        <i class="fas fa-info-circle ms-2"></i>
                                        ูุง ุชูุฌุฏ ุณูุงุฑุงุช ูุชุงุญุฉ ููุนุฑุถ. ููููู ุฅุถุงูุฉ ุณูุงุฑุฉ ุฌุฏูุฏุฉ ูู ุฎูุงู ุงูููุฑ ุนูู ุฒุฑ "ุฅุถุงูุฉ ุณูุงุฑุฉ ุฌุฏูุฏุฉ".
                                    </div>
                                </td>
                            </tr>
                        {% endif %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
