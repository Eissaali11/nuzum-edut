{% extends 'mobile/layout.html' %}

{% block title %}إضافة مصروف جديد{% endblock %}
{% block header_title %}إضافة مصروف جديد{% endblock %}

{% block content %}
{% include 'mobile/partials/add_vehicle_expense/_content.html' %}
{% endblock %}

{% block styles %}
<style>
  .mobile-form-file {
    position: relative;
    margin-bottom: 16px;
  }
  
  .mobile-form-file-input {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
  }
  
  .mobile-form-file-label {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 10px 16px;
    background-color: var(--card-bg);
    border: 1px dashed var(--border-color);
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: all var(--transition-normal);
  }
  
  .mobile-form-file-label:hover {
    border-color: var(--primary-color);
    color: var(--primary-color);
  }
  
  .mobile-form-file-preview {
    margin-top: 8px;
    width: 100%;
    height: 150px;
    background-color: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-muted);
  }
  
  .mobile-form-file-preview img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  .mobile-form-section {
    margin-bottom: 24px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--border-light);
  }
  
  .mobile-form-section:last-child {
    border-bottom: none;
    margin-bottom: 0;
  }
  
  .mobile-form-section-title {
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-medium);
    margin-bottom: 16px;
    color: var(--text-primary);
  }
  
  .mobile-form-row {
    display: flex;
    gap: 16px;
  }
  
  .mobile-form-row .mobile-form-group {
    flex: 1;
  }
  
  .mobile-form-checkbox {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 0;
  }
  
  .mobile-form-checkbox-input {
    width: 18px;
    height: 18px;
  }
  
  .mobile-form-checkbox-label {
    cursor: pointer;
  }
</style>
{% endblock %}

{% block scripts %}
<script>
  // معاينة الصورة قبل الرفع
  document.getElementById('invoiceImage').addEventListener('change', function(e) {
    const file = e.target.files[0];
    const preview = document.getElementById('imagePreview');
    
    if (file) {
      const reader = new FileReader();
      
      reader.onload = function(e) {
        preview.innerHTML = `<img src="${e.target.result}" alt="معاينة الصورة">`;
      };
      
      reader.readAsDataURL(file);
    } else {
      preview.innerHTML = '';
    }
  });
  
  // إظهار أو إخفاء قسم بيانات الوقود حسب نوع المصروف
  document.querySelector('select[name="expense_type"]').addEventListener('change', function() {
    const fuelExpenseSection = document.getElementById('fuelExpenseSection');
    
    if (this.value === 'fuel') {
      fuelExpenseSection.style.display = 'block';
    } else {
      fuelExpenseSection.style.display = 'none';
    }
  });
</script>
{% endblock %}