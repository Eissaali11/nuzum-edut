<div class="dashboard-container">
    <!-- الإحصائيات الرئيسية -->
    <div class="stats-grid">
        <div class="stat-card total">
            <div class="stat-icon">
                <i class="fas fa-file-alt"></i>
            </div>
            <div class="stat-value">{{ total_documents }}</div>
            <div class="stat-label">إجمالي الوثائق</div>
        </div>

        <div class="stat-card expired">
            <div class="stat-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="stat-value">{{ expired_documents }}</div>
            <div class="stat-label">وثائق منتهية</div>
        </div>

        <div class="stat-card warning">
            <div class="stat-icon">
                <i class="fas fa-clock"></i>
            </div>
            <div class="stat-value">{{ expiring_soon + expiring_later }}</div>
            <div class="stat-label">قريبة من الانتهاء</div>
        </div>

        <div class="stat-card valid">
            <div class="stat-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-value">{{ valid_documents }}</div>
            <div class="stat-label">وثائق سارية</div>
        </div>
    </div>

    <!-- الرسوم البيانية -->
    <div class="chart-container">
        <div class="chart-title">توزيع الوثائق حسب الحالة</div>
        <canvas id="statusChart" height="200"></canvas>
    </div>

    <!-- الوثائق المنتهية -->
    {% if expired_docs %}
    <div class="section-header">
        <div class="section-title">
            <i class="fas fa-times-circle"></i>
            وثائق منتهية
        </div>
        <a href="{{ url_for('mobile.documents', status='expired') }}" class="view-all-btn">
            عرض الكل
            <i class="fas fa-arrow-left"></i>
        </a>
    </div>

    {% for doc in expired_docs %}
    <a href="{{ url_for('mobile.document_details', document_id=doc.id) }}" style="text-decoration: none;">
        <div class="document-card expired">
            <div class="document-header">
                <div class="doc-icon">
                    <i class="fas fa-file-alt"></i>
                </div>
                <div class="doc-info">
                    <div class="doc-employee">{{ doc.employee.name }}</div>
                    <div class="doc-type">{{ doc.document_type }}</div>
                </div>
            </div>
            <div class="doc-expiry">
                <i class="fas fa-calendar-times"></i>
                انتهت منذ {{ (current_date - doc.expiry_date).days }} يوم
            </div>
        </div>
    </a>
    {% endfor %}
    {% endif %}

    <!-- الوثائق القريبة من الانتهاء -->
    {% if expiring_docs %}
    <div class="section-header">
        <div class="section-title">
            <i class="fas fa-exclamation-triangle"></i>
            قريبة من الانتهاء
        </div>
        <a href="{{ url_for('mobile.documents', status='expiring') }}" class="view-all-btn">
            عرض الكل
            <i class="fas fa-arrow-left"></i>
        </a>
    </div>

    {% for doc in expiring_docs %}
    <a href="{{ url_for('mobile.document_details', document_id=doc.id) }}" style="text-decoration: none;">
        <div class="document-card warning">
            <div class="document-header">
                <div class="doc-icon">
                    <i class="fas fa-file-alt"></i>
                </div>
                <div class="doc-info">
                    <div class="doc-employee">{{ doc.employee.name }}</div>
                    <div class="doc-type">{{ doc.document_type }}</div>
                </div>
            </div>
            <div class="doc-expiry">
                <i class="fas fa-hourglass-half"></i>
                متبقي {{ (doc.expiry_date - current_date).days }} يوم
            </div>
        </div>
    </a>
    {% endfor %}
    {% endif %}

    {% if not expired_docs and not expiring_docs %}
    <div class="empty-state">
        <i class="fas fa-clipboard-check"></i>
        <p>جميع الوثائق سارية المفعول!</p>
    </div>
    {% endif %}
</div>
