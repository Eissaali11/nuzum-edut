{% extends 'mobile/layout.html' %}

{% block title %}تعديل سجل حضور - نُظم{% endblock %}

{% block header_title %}تعديل سجل الحضور{% endblock %}

{% block content %}
{% include 'mobile/partials/edit_attendance/_content.html' %}
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // تعطيل حقول الوقت للحالات التي لا تحتاج لها
    const statusInputs = document.querySelectorAll('input[name="status"]');
    const checkInInput = document.querySelector('input[name="check_in"]');
    const checkOutInput = document.querySelector('input[name="check_out"]');
    
    function updateTimeFields() {
        const selectedStatus = document.querySelector('input[name="status"]:checked').value;
        const disableTime = ['غائب', 'إجازة', 'مرضي'].includes(selectedStatus);
        
        checkInInput.disabled = disableTime;
        checkOutInput.disabled = disableTime;
        
        if (disableTime) {
            checkInInput.value = '';
            checkOutInput.value = '';
        }
    }
    
    statusInputs.forEach(input => {
        input.addEventListener('change', updateTimeFields);
    });
    
    // تطبيق القاعدة عند تحميل الصفحة
    updateTimeFields();
});

function confirmDelete() {
    if (confirm('هل أنت متأكد من حذف هذا السجل؟ لا يمكن التراجع عن هذا الإجراء.')) {
        document.getElementById('deleteForm').submit();
    }
}
</script>
{% endblock %}
